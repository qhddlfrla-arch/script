<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="유튜브 대본을 입력하면 새로운 주제와 대본을 생성해주는 AI 대본 리믹서">
    <title>YouTube Script Remixer | 유튜브 대본 리믹서</title>
    <link rel="stylesheet" href="styles/main.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap"
        rel="stylesheet">
</head>

<body>
    <div class="app-container">
        <!-- 사이드바: 히스토리 리스트 -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2>📜 대본 히스토리</h2>
                <button id="clear-history-btn" class="btn-icon" title="전체 삭제">
                    <span>🗑️</span>
                </button>
            </div>
            <ul id="history-list" class="history-list">
                <!-- 히스토리 항목이 여기에 동적으로 추가됨 -->
            </ul>
            <div class="history-empty" id="history-empty">
                <p>저장된 대본이 없습니다.</p>
                <p class="sub">새 대본을 생성해 보세요!</p>
            </div>
        </aside>

        <!-- 메인 콘텐츠 영역 -->
        <main class="main-content">
            <header class="main-header">
                <h1>🎬 YouTube Script Remixer</h1>
                <p class="subtitle">기존 대본을 입력하면, AI가 새로운 주제와 대본을 만들어 드립니다</p>
            </header>

            <!-- API Key 설정 섹션 -->
            <section class="api-key-section">
                <div class="api-key-header">
                    <span class="api-key-icon">🔑</span>
                    <span class="api-key-title">Google Gemini API Key</span>
                    <span class="api-key-status" id="api-key-status">미설정</span>
                </div>
                <div class="api-key-form">
                    <input type="password" id="api-key-input" class="api-key-input"
                        placeholder="AI Studio에서 발급받은 키를 입력하세요">
                    <button id="toggle-key-visibility" class="btn-icon" title="키 표시/숨김">👁️</button>
                    <button id="save-api-key-btn" class="btn-save-key">저장</button>
                    <button id="clear-api-key-btn" class="btn-clear-key" title="키 삭제">✖️</button>
                </div>
                <p class="api-key-hint">💡 API 키가 없으면 시뮬레이션 모드로 작동합니다 | <a href="https://aistudio.google.com/app/apikey"
                        target="_blank" style="color: var(--accent-secondary);">API Key 발급받기 →</a></p>
            </section>

            <!-- 입력 섹션 -->
            <section class="input-section">
                <div class="input-group">
                    <label for="original-script">📝 주제 또는 키워드 입력</label>
                    <textarea id="original-script" placeholder="예: 노후에 친구가 줄어드는 이유, 자녀와의 관계 회복, 인생 후반전의 지혜..."
                        rows="4"></textarea>
                </div>
                <div class="input-group">
                    <label for="previous-story">📖 지난 이야기 (선택사항)</label>
                    <textarea id="previous-story" placeholder="시리즈 영상인 경우, 이전 회차의 내용을 간략히 적어주세요. AI가 자연스럽게 연결해 드립니다..."
                        rows="3"></textarea>
                </div>
                <div class="input-group">
                    <label>💫 감성(Tone) 선택</label>
                    <div class="tone-buttons" id="tone-buttons">
                        <button type="button" class="tone-btn active" data-tone="warm">🤗 따뜻한</button>
                        <button type="button" class="tone-btn" data-tone="calm">🧘 차분한</button>
                        <button type="button" class="tone-btn" data-tone="hopeful">🌅 희망적</button>
                        <button type="button" class="tone-btn" data-tone="nostalgic">🍂 향수적</button>
                        <button type="button" class="tone-btn" data-tone="wise">📚 지혜로운</button>
                    </div>
                </div>
                <div class="input-group">
                    <label for="duration-select">⏱️ 영상 길이 선택</label>
                    <select id="duration-select" class="duration-select">
                        <option value="10">10분 (가볍게 듣기 좋음)</option>
                        <option value="15" selected>15분 (가장 추천하는 오디오북 길이)</option>
                        <option value="30">30분 (깊이 있는 이야기)</option>
                        <option value="60">1시간 (수면용/장편 낭독)</option>
                    </select>
                </div>
                <button id="generate-btn" class="btn-primary">
                    <span class="btn-text">🚀 새 주제 및 대본 생성</span>
                    <span class="btn-loading">⏳ 생성 중...</span>
                </button>
                <div class="mode-indicator" id="mode-indicator">
                    <span class="mode-badge simulation">시뮬레이션 모드</span>
                </div>
            </section>

            <!-- 결과 출력 섹션 -->
            <section class="result-section" id="result-section">
                <div class="result-card">
                    <div class="result-header">
                        <h3>💡 추천 주제</h3>
                        <button class="btn-copy" data-target="result-topic" title="복사">📋</button>
                    </div>
                    <div class="result-content" id="result-topic">
                        <!-- 추천 주제가 여기에 표시됨 -->
                    </div>
                </div>
                <div class="result-card">
                    <div class="result-header">
                        <h3>📄 새 대본</h3>
                        <div class="result-actions">
                            <button id="tts-btn" class="btn-tts" title="미리 듣기">
                                <span class="tts-play">🔊 미리 듣기</span>
                                <span class="tts-stop">⏹️ 정지</span>
                            </button>
                            <button id="copy-pure-btn" class="btn-copy-pure" title="순수 본문만 복사 (TTS용)">📜 본문만</button>
                            <button class="btn-copy" data-target="result-script" title="전체 복사">📋 전체</button>
                        </div>
                    </div>
                    <div class="result-content result-script" id="result-script">
                        <!-- 새 대본이 여기에 표시됨 -->
                    </div>
                </div>
            </section>

            <!-- 히스토리 상세 보기 (선택 시) -->
            <section class="detail-section" id="detail-section">
                <div class="detail-header">
                    <h3>📌 저장된 대본 상세</h3>
                    <button id="close-detail-btn" class="btn-icon" title="닫기">✖️</button>
                </div>
                <div class="detail-meta">
                    <span id="detail-date"></span>
                </div>
                <div class="detail-card">
                    <h4>💡 주제</h4>
                    <p id="detail-topic"></p>
                </div>
                <div class="detail-card">
                    <h4>📄 대본</h4>
                    <div class="detail-script" id="detail-script"></div>
                </div>
                <div class="detail-card">
                    <h4>📝 원본 대본</h4>
                    <div class="detail-original" id="detail-original"></div>
                </div>
            </section>
        </main>
    </div>

    <script src="scripts/storage.js"></script>
    <script src="scripts/simulator.js"></script>
    <script src="scripts/gemini-service.js"></script>
    <script src="scripts/app.js"></script>
</body>

</html>